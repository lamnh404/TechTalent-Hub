<%- include('../partials/header') %>

    <body>
        <%- include('../partials/navbar') %>

            <div class="main-content" style="padding-top: 80px;">
                <!-- Hero Section -->
                <div class="bg-primary text-white py-5 mb-5 position-relative overflow-hidden">
                    <div class="container position-relative z-index-1">
                        <div class="row align-items-center">
                            <div class="col-lg-8">
                                <div class="d-flex align-items-center mb-3">
                                    <% if (job.LogoURL) { %>
                                        <img src="<%= job.LogoURL %>" alt="<%= job.CompanyName %>"
                                            class="bg-white rounded p-2 mr-3 shadow-sm"
                                            style="width: 64px; height: 64px; object-fit: contain;">
                                        <% } else { %>
                                            <div class="bg-white rounded p-2 mr-3 shadow-sm d-flex align-items-center justify-content-center text-primary"
                                                style="width: 64px; height: 64px; font-size: 24px;">
                                                <i class="fas fa-building"></i>
                                            </div>
                                            <% } %>
                                                <div>
                                                    <h5 class="mb-0 text-white-50">
                                                        <%= job.CompanyName %>
                                                    </h5>
                                                    <h1 class="font-weight-bold mb-0">
                                                        <%= job.JobTitle %>
                                                    </h1>
                                                </div>
                                </div>
                                <div class="d-flex flex-wrap text-white-50">
                                    <span class="mr-4 mb-2"><i class="fas fa-map-marker-alt mr-2"></i>
                                        <%= job.Location %>
                                    </span>
                                    <span class="mr-4 mb-2"><i class="fas fa-briefcase mr-2"></i>
                                        <%= job.EmploymentType %>
                                    </span>
                                    <span class="mr-4 mb-2"><i class="fas fa-clock mr-2"></i>Posted <%= new
                                            Date(job.PostedDate).toLocaleDateString() %></span>
                                </div>
                            </div>
                            <div class="col-lg-4 text-lg-right mt-4 mt-lg-0">
                                <% if (typeof user !=='undefined' && user && user.role==='JobSeeker' ) { %>
                                    <a href="/jobs/<%= job.JobID %>/apply"
                                        class="btn btn-light btn-lg font-weight-bold shadow-lg px-5 text-primary">
                                        Apply Now <i class="fas fa-arrow-right ml-2"></i>
                                    </a>
                                    <% } else if (typeof user==='undefined' || !user) { %>
                                        <a href="/login?redirect=/jobs/<%= job.JobID %>"
                                            class="btn btn-outline-light btn-lg px-5">
                                            Login to Apply
                                        </a>
                                        <% } %>
                            </div>
                        </div>
                    </div>
                    <!-- Decorative circle -->
                    <div class="position-absolute"
                        style="top: -50px; right: -50px; width: 300px; height: 300px; background: rgba(255,255,255,0.1); border-radius: 50%;">
                    </div>
                </div>

                <div class="container mb-5">
                    <div class="row">
                        <!-- Main Content -->
                        <div class="col-lg-8">
                            <div class="card shadow-sm border-0 mb-4">
                                <div class="card-body p-4">
                                    <h4 class="font-weight-bold mb-4 text-dark">Job Description</h4>
                                    <div class="job-description text-secondary"
                                        style="line-height: 1.8; font-size: 1.05rem;">
                                        <%- job.JobDescription.replace(/\n/g, '<br>' ) %>
                                    </div>
                                </div>
                            </div>

                            <div class="card shadow-sm border-0 mb-4">
                                <div class="card-body p-4">
                                    <h4 class="font-weight-bold mb-4 text-dark">Requirements & Skills</h4>
                                    <!-- Placeholder for skills if available in future -->
                                    <p class="text-muted">No specific skills listed for this job.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Sidebar -->
                        <div class="col-lg-4">
                            <div class="card shadow-sm border-0 mb-4">
                                <div class="card-body p-4">
                                    <h5 class="font-weight-bold mb-4">Job Overview</h5>

                                    <div class="d-flex align-items-start mb-3">
                                        <div class="text-primary mr-3" style="font-size: 1.2rem; width: 30px;"><i
                                                class="fas fa-money-bill-wave"></i></div>
                                        <div>
                                            <h6 class="font-weight-bold mb-1">Salary</h6>
                                            <p class="text-muted mb-0">$<%= job.SalaryMin.toLocaleString() %> - $<%=
                                                        job.SalaryMax.toLocaleString() %>
                                            </p>
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-start mb-3">
                                        <div class="text-primary mr-3" style="font-size: 1.2rem; width: 30px;"><i
                                                class="fas fa-map-marker-alt"></i></div>
                                        <div>
                                            <h6 class="font-weight-bold mb-1">Location</h6>
                                            <p class="text-muted mb-0">
                                                <%= job.Location %>
                                            </p>
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-start mb-3">
                                        <div class="text-primary mr-3" style="font-size: 1.2rem; width: 30px;"><i
                                                class="fas fa-briefcase"></i></div>
                                        <div>
                                            <h6 class="font-weight-bold mb-1">Job Type</h6>
                                            <p class="text-muted mb-0">
                                                <%= job.EmploymentType %>
                                            </p>
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-start mb-3">
                                        <div class="text-primary mr-3" style="font-size: 1.2rem; width: 30px;"><i
                                                class="fas fa-calendar-alt"></i></div>
                                        <div>
                                            <h6 class="font-weight-bold mb-1">Date Posted</h6>
                                            <p class="text-muted mb-0">
                                                <%= new Date(job.PostedDate).toLocaleDateString() %>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card shadow-sm border-0">
                                <div class="card-body p-4">
                                    <h5 class="font-weight-bold mb-3">About <%= job.CompanyName %>
                                    </h5>
                                    <p class="text-muted mb-3 small">
                                        <!-- Placeholder for company description -->
                                        Learn more about our company and culture.
                                    </p>
                                    <a href="/companies/<%= job.CompanyID %>"
                                        class="btn btn-outline-primary btn-block btn-sm">View Company Profile</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <%- include('../partials/footer') %>

                <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
                <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    </body>

    </html>