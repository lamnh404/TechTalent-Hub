<%
    // Default role if not provided
    const userRole = typeof role !== 'undefined' ? role : 'guest';
    const userName = typeof user !== 'undefined' ? user.name : 'Guest';
%>

<!-- Thay đổi class ở đây -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top navbar-glass">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">
            <img src="/images/favicon-t.svg" alt="Logo" width="30" height="30" class="d-inline-block align-top mr-2">
            <span class="brand-name-main">TechTalent</span><span class="brand-name-accent">Hub</span>
        </a>
        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <!-- Common Links -->
                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                
                <% if (userRole === 'guest') { %>
                    <!-- Guest Navigation -->
                    <li class="nav-item">
                        <a class="nav-link" href="/jobs">Browse Jobs</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/companies">Companies</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn btn-outline-primary ml-lg-2" href="/login">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn btn-primary text-white ml-lg-2" href="/register">Sign Up</a>
                    </li>
                <% } else if (userRole === 'Admin' || userRole === 'admin') { %>
                    <!-- Admin Navigation -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button" data-toggle="dropdown">
                            User Management
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="/admin/users">All Users</a>
                            <a class="dropdown-item" href="/admin/users?role=JobSeeker">Job Seekers</a>
                            <a class="dropdown-item" href="/admin/users?role=Company">Companies</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/analytics">Analytics</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-toggle="dropdown">
                            <%= userName %>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item" href="/admin/profile">Settings</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-danger" href="/logout">Logout</a>
                        </div>
                    </li>
                <% } else if (userRole === 'Company' || userRole === 'company') { %>
                    <!-- Company Navigation -->
                    <li class="nav-item">
                        <a class="nav-link" href="/company/dashboard">Dashboard</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="jobsDropdown" role="button" data-toggle="dropdown">
                            Jobs
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="/company/jobs">My Job Posts</a>
                            <a class="dropdown-item" href="/company/jobs/create">Post New Job</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="companyProfileDropdown" role="button" data-toggle="dropdown">
                            <%= userName %>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item" href="/company/profile">Company Profile</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-danger" href="/logout">Logout</a>
                        </div>
                    </li>
                <% } else if (userRole === 'JobSeeker' || userRole === 'jobseeker') { %>
                    <!-- Job Seeker Navigation -->
                    <li class="nav-item">
                        <a class="nav-link" href="/jobs">Browse Jobs</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/seeker/applications">My Applications</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="seekerProfileDropdown" role="button" data-toggle="dropdown">
                            <%= userName %>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item" href="/seeker/profile">My Profile</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-danger" href="/logout">Logout</a>
                        </div>
                    </li>
                <% } %>
            </ul>
        </div>
    </div>
</nav>

<style>
/* Xóa style cũ và thêm style mới */
.navbar-glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(15px) saturate(150%);
    -webkit-backdrop-filter: blur(15px) saturate(150%);
    border-bottom: 1px solid rgba(255, 255, 255, 0.9);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
    padding: 0.75rem 1.5rem;
}

.navbar-glass .navbar-brand {
    display: flex;
    align-items: center;
}

.navbar-glass .brand-name-main {
    font-family: 'Segoe UI', 'Inter', sans-serif;
    font-size: 1.5rem;
    font-weight: 600;
    color: #1f2937;
}

.navbar-glass .brand-name-accent {
    font-family: 'Segoe UI', 'Inter', sans-serif;
    font-size: 1.5rem;
    font-weight: 700;
    background: linear-gradient(45deg, #04466f, #140fb7);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    text-fill-color: transparent;
}

.navbar-glass .nav-link {
    color: #1f2937 !important;
    font-weight: 500;
    transition: color 0.2s;
}

.navbar-glass .nav-link:hover {
    color: #0056b3 !important;
}

.navbar-glass .navbar-toggler {
    border-color: rgba(0,0,0,0.2);
}

.navbar-glass .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(31, 41, 55, 0.8)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

/* Add padding to body to prevent content from being hidden under fixed navbar */
body {
    padding-top: 80px; /* Tăng padding để không bị che */
}
</style>