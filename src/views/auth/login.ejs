<%- include('../partials/header', { title: 'Login' }) %>

    <body class="auth-layout-page">
        <section class="auth-hero">

            <a href="/" class="brand-logo">
                <img src="/images/logo.svg" alt="TechTalent Hub Logo" class="brand-logo-icon">
                <div class="brand-name-container">
                    <span class="brand-name-main">TechTalent</span><span class="brand-name-accent">Hub</span>
                </div>
            </a>

            <div class="sky-arcs"></div>

            <div class="auth-content-wrapper">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-sm-10 col-md-8 col-lg-6 col-xl-5">
                            <div class="card auth-card">
                                <div class="card-body p-4 p-md-5">

                                    <div class="sheet-badge mx-auto mb-4"
                                        style="width: 60px; height: 60px; background: rgba(0,99,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary-color); font-size: 1.5rem;">
                                        <i class="fas fa-sign-in-alt"></i>
                                    </div>

                                    <div class="text-center mb-4">
                                        <h3 class="mb-1 font-weight-bold text-dark">Welcome Back!</h3>
                                        <p class="text-muted small">Login to continue your journey.</p>
                                    </div>

                                    <% if (typeof error !=='undefined' && error) { %>
                                        <div class="alert alert-danger auth-alert shadow-sm" role="alert">
                                            <i class="fas fa-exclamation-circle mr-2"></i>
                                            <%= error %>
                                        </div>
                                        <% } %>
                                            <% if (typeof success !=='undefined' && success) { %>
                                                <div class="alert alert-success auth-alert shadow-sm" role="alert">
                                                    <i class="fas fa-check-circle mr-2"></i>
                                                    <%= success %>
                                                </div>
                                                <% } %>

                                                    <form action="/auth/login" method="POST" id="loginForm" novalidate>

                                                        <div class="form-group mb-3">
                                                            <div class="input-wrapper">
                                                                <i class="far fa-envelope input-icon"></i>
                                                                <input type="email" class="form-control-modern"
                                                                    id="email" name="email" placeholder="Email Address"
                                                                    value="<%= typeof email !== 'undefined' ? email : '' %>"
                                                                    required autocomplete="email">
                                                            </div>
                                                        </div>

                                                        <div class="form-group mb-2">
                                                            <div class="input-wrapper">
                                                                <i class="fas fa-lock input-icon"></i>
                                                                <input type="password" class="form-control-modern pr-5"
                                                                    id="password" name="password" placeholder="Password"
                                                                    required autocomplete="current-password">
                                                                <button type="button" class="toggle-password"
                                                                    id="togglePassword"
                                                                    style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #6b7280; cursor: pointer;">
                                                                    <i class="fas fa-eye-slash" id="eyeIcon"></i>
                                                                </button>
                                                            </div>
                                                        </div>

                                                        <div class="text-right mb-4">
                                                            <a href="/auth/forgot-password"
                                                                class="small text-primary font-weight-bold text-decoration-none">Forgot
                                                                password?</a>
                                                        </div>

                                                        <button type="submit" class="btn btn-cta-dark btn-block shadow">
                                                            Sign In <i class="fas fa-arrow-right ml-2"></i>
                                                        </button>
                                                    </form>

                                                    <div class="divider-modern my-4">
                                                        <span class="divider-text">Or sign in with</span>
                                                    </div>

                                                    <div class="social-buttons">
                                                        <a class="social-btn" href="/auth/google"><i
                                                                class="fab fa-google"></i></a>
                                                        <a class="social-btn" href="/auth/facebook"><i
                                                                class="fab fa-facebook-f"></i></a>
                                                        <a class="social-btn" href="/auth/apple"><i
                                                                class="fab fa-apple"></i></a>
                                                    </div>

                                                    <div class="text-center mt-4">
                                                        <p class="small text-muted">Don't have an account yet? <a
                                                                href="/register"
                                                                class="font-weight-bold text-primary">Register for
                                                                free</a></p>
                                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <%- include('../partials/footer') %>
        </section>

        <script>
            // Toggle Password Visibility
            document.getElementById('togglePassword')?.addEventListener('click', function (e) {
                e.preventDefault();
                const password = document.getElementById('password');
                const eyeIcon = document.getElementById('eyeIcon');
                if (!password || !eyeIcon) return;

                const isHidden = password.type === 'password';
                password.type = isHidden ? 'text' : 'password';

                if (isHidden) {
                    eyeIcon.classList.remove('fa-eye-slash');
                    eyeIcon.classList.add('fa-eye');
                } else {
                    eyeIcon.classList.remove('fa-eye');
                    eyeIcon.classList.add('fa-eye-slash');
                }
            });

            const errorMessage = "<%= typeof error !== 'undefined' ? error : '' %>";
            if (errorMessage) {
                Swal.fire({
                    icon: 'error',
                    title: 'Login Failed',
                    text: errorMessage,
                    confirmButtonColor: '#0063FF',
                    background: 'rgba(255, 255, 255, 0.95)',
                    backdrop: `rgba(0,0,123,0.1)`
                });
            }
        </script>
    </body>