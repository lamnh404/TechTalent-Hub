<%- include('../partials/header', { title: 'Homepage' }) %>

<body class="animate-fade-in">
    
    <%- include('../partials/navbar', {activePage: 'home'}) %>

    <section class="home-hero">
        <div class="container position-relative" style="z-index: 2;">
            <div class="text-center">
                <span class="badge badge-pill badge-primary px-3 py-2 mb-3 animate__animated animate__fadeInDown">
                    ðŸš€ #1 Tech Recruitment Platform
                </span>
                <h1 class="hero-title animate__animated animate__fadeInUp">
                    Find Your Dream <span class="text-primary">Tech Job</span>
                </h1>
                <p class="hero-subtitle animate__animated animate__fadeInUp animate__delay-1s">
                    Connect with top tech companies and discover opportunities that match your skills.
                </p>
                
                <div class="search-wrapper animate__animated animate__fadeInUp animate__delay-1s mx-auto">
                    <form action="/jobs" method="GET" class="d-flex w-100 align-items-center">
                        <div class="flex-grow-1 position-relative">
                            <i class="fas fa-search position-absolute text-muted" style="left: 20px; top: 50%; transform: translateY(-50%); z-index: 5;"></i>
                            <input type="text" name="q" class="search-input" placeholder="Search by title, skill, or company..." style="padding-left: 50px; width: 100%;">
                        </div>
                        <button type="submit" class="btn-search ml-2">
                            Search
                        </button>
                    </form>
                </div>
                
                <div class="mt-4 text-muted small animate__animated animate__fadeIn">
                    Popular: 
                    <span class="badge badge-light border ml-1">ReactJS</span> 
                    <span class="badge badge-light border ml-1">Node.js</span> 
                    <span class="badge badge-light border ml-1">Python</span>
                </div>
            </div>
        </div>
    </section>

    <section class="section section-alt">
        <div class="container">
            <h2 class="section-title">Featured Job Openings</h2>
            <div class="row">
                
                <% if (featuredJobs && featuredJobs.length > 0) { %>
                    <% featuredJobs.forEach(job => { %>
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="job-card hover-scale h-100"> 
                                <div class="d-flex justify-content-between align-items-start">
                                    <img src="<%= job.LogoURL || '/images/default-company.png' %>" alt="<%= job.CompanyName %> Logo" class="company-logo" onerror="this.src='/images/default-company.png'">
                                    <button class="btn btn-sm btn-link text-muted"><i class="far fa-heart"></i></button>
                                </div>
                                <a href="/jobs/<%= job.JobID %>" class="job-title stretched-link"><%= job.JobTitle %></a>
                                <p class="company-name"><%= job.CompanyName %></p>
                                <div class="job-tags mt-auto">
                                    <span class="tag tag-type"><%= job.EmploymentType %></span>
                                    <span class="tag tag-location"><%= job.Location %></span>
                                </div>
                            </div>
                        </div>
                    <% }) %>
                <% } else { %>
                    <div class="col-12 text-center text-muted">
                        No featured jobs available at the moment.
                    </div>
                <% } %>

            </div>
            <div class="text-center mt-5">
                <a href="/jobs" class="btn btn-primary-modern btn-lg px-5 rounded-pill font-weight-bold shadow-sm">View All Jobs</a>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <h2 class="section-title">How It Works</h2>
            <div class="row text-center">
                <div class="col-md-4 mb-4">
                    <div class="step-card">
                        <div class="step-icon-box animate-zoom-in">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h4>For Job Seekers</h4>
                        <p class="text-muted">Create your profile, browse thousands of jobs, and apply with a single click.</p>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="step-card">
                        <div class="step-icon-box animate-zoom-in" style="animation-delay: 0.2s;">
                            <i class="fas fa-building"></i>
                        </div>
                        <h4>For Companies</h4>
                        <p class="text-muted">Post job openings, search our database, and find the perfect candidate.</p>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="step-card">
                        <div class="step-icon-box animate-zoom-in" style="animation-delay: 0.4s;">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h4>Get Hired</h4>
                        <p class="text-muted">Connect, interview, and start your new career journey today.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <% if (typeof user === 'undefined' || !user) { %>
        <div class="container">
            <section class="cta-section animate-pulse">
                <h2 class="mb-3 font-weight-bold">Ready to Get Started?</h2>
                <p class="mb-4 opacity-90">Join TechTalent Hub today and take the next step in your career.</p>
                <a href="/register" class="btn-light-cta">Sign Up for Free</a>
            </section>
        </div>
    <% } %>

    <%- include('../partials/footer') %>
</body>